"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2347],{6980:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var t=r(4848),i=r(8453);const s={sidebar_position:5},o="SOEM (Linux)",a={id:"eRob driver/SOEM EtherCAT Linux",title:"SOEM (Linux)",description:"---",source:"@site/docs/eRob driver/SOEM EtherCAT Linux.md",sourceDirName:"eRob driver",slug:"/eRob driver/SOEM EtherCAT Linux",permalink:"/my_web/docs/eRob driver/SOEM EtherCAT Linux",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/eRob driver/SOEM EtherCAT Linux.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"SOEM (Windows)",permalink:"/my_web/docs/eRob driver/SOEM EtherCAT"},next:{title:"IGH EtherCAT (Linux)",permalink:"/my_web/docs/eRob driver/IGH EtherCAT"}},d={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step-by-Step Guide",id:"step-by-step-guide",level:2},{value:"1. Install Required Packages",id:"1-install-required-packages",level:3},{value:"2. Download and Build SOEM",id:"2-download-and-build-soem",level:3},{value:"3. Verify Network Interface",id:"3-verify-network-interface",level:3},{value:"4. Check EtherCAT Network",id:"4-check-ethercat-network",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"soem-linux",children:"SOEM (Linux)"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Before you begin, make sure you have the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ubuntu 22.04"})," installed on your system."]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"SOEM (Simple Open EtherCAT Master)."})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"step-by-step-guide",children:"Step-by-Step Guide"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"1-install-required-packages",children:"1. Install Required Packages"}),"\n",(0,t.jsx)(n.p,{children:"Start by installing the required dependencies on your Ubuntu system:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install build-essential git libpcap-dev\n"})}),"\n",(0,t.jsx)(n.p,{children:"libpcap-dev is essential for SOEM to access the network interface and handle EtherCAT frames."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"2-download-and-build-soem",children:"2. Download and Build SOEM"}),"\n",(0,t.jsx)(n.p,{children:"Clone the SOEM repository and build it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/OpenEtherCATsociety/SOEM.git\ncd SOEM\nmkdir build\ncd build\ncmake ..\nmake\nsudo make install\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will download, build, and install SOEM on your Ubuntu machine."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"3-verify-network-interface",children:"3. Verify Network Interface"}),"\n",(0,t.jsx)(n.p,{children:"To drive a motor over EtherCAT, ensure that the network interface connected to the EtherCAT network is correctly configured."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"List all network interfaces using:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ifconfig\n\nfconfig\neno1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet XXX.XXX.XXX.XXX  netmask 255.255.252.0  broadcast XXX\n        inet6 XXXX:XXXX:XXXX:XXXX:XXXX  prefixlen 64  scopeid 0x20<link>\n        ether XX:XX:XX:XX:XX:XX  txqueuelen 1000  (Ethernet)\n        RX packets 12433221  bytes 3311308984 (3.3 GB)\n        RX errors 0  dropped 177668  overruns 0  frame 0\n        TX packets 1582150  bytes 313791056 (313.7 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n....\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, ",(0,t.jsx)(n.code,{children:"eno1"})," is my EtherCAT interface."]}),"\n",(0,t.jsx)(n.p,{children:"Disable the IP stack on the interface you will use for EtherCAT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo ifconfig eno1 down\nsudo ifconfig eno1 up\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Replace ",(0,t.jsx)(n.code,{children:"eno1"})," with the actual interface connected to your EtherCAT network."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"4-check-ethercat-network",children:"4. Check EtherCAT Network"}),"\n",(0,t.jsx)(n.p,{children:"Let's check the EtherCAT network to make sure the SOEM and the EtherCAT network is working."}),"\n",(0,t.jsx)(n.p,{children:"First, retrieve the list of ethernet adapter discovered on your machine."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"erobman@erobman:~$ cd ~/SOEM/build\nerobman@erobman:~$ sudo .\\slaveinfo\n\nSOEM (Simple Open EtherCAT Master)\nSlaveinfo\nUsage: slaveinfo ifname [options]\nifname = eth0 for example\nOptions :\n -sdo : print SDO info\n -map : print mapping\nAvailable adapters\nEnd program\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["Look for the ethernet adapter for your ",(0,t.jsx)(n.code,{children:"EtherCAT"})," network and take a note of the path, for example,  ",(0,t.jsx)(n.code,{children:"\\Device\\NPF_{A54146EA-CD6F-4A95-93E4-0919C4B2D685} "}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Now run the ",(0,t.jsx)(n.code,{children:"slaveinfo"})," with the ethernet device path again to list what ",(0,t.jsx)(n.code,{children:"EtherCAT"})," slave controllers are discovered on the network. You should see information similar to the below and check that the details make sense to your environment."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"erobman@erobman:~$ sudo .\\slaveinfo \\Device\\NPF_{A54146EA-CD6F-4A95-93E4-0919C4B2D685}\n\n\n\n\nSlave:1\n Name:simco drive 40028083-00-0\n Output size: 48bits\n Input size: 48bits\n State: 4\n Delay: 0[ns]\n Has DC: 0\n Activeports:1.1.0.0\n Configured address: 1002\n Man: 0000010a ID: 0262c7b3 Rev: 00010211\n SM0 A:1000 L: 512 F:00010026 Type:1\n SM1 A:1400 L: 512 F:00010022 Type:2\n SM2 A:1800 L:   6 F:00010064 Type:3\n SM3 A:1950 L:   6 F:00010020 Type:4\n FMMU0 Ls:0000000a Ll:   6 Lsb:0 Leb:7 Ps:1800 Psb:0 Ty:02 Act:01\n FMMU1 Ls:00000027 Ll:   6 Lsb:0 Leb:7 Ps:1950 Psb:0 Ty:01 Act:01\n FMMUfunc 0:1 1:2 2:0 3:0\n MBX length wr: 512 rd: 512 MBX protocols : 0c\n CoE details: 27 FoE details: 01 EoE details: 00 SoE details: 00\n Ebus current: 0[mA]\n only LRD/LWR:0\nPDO mapping according to CoE :\n  SM2 outputs\n     addr b   index: sub bitl data_type    name\n  [0x000A.0] 0x6040:0x00 0x10 UNSIGNED16   Controlword\n  [0x000C.0] 0x60FF:0x00 0x20 INTEGER32    Target Velocity\n  [0x0010.0] 0x0000:0x00 0x00\n  [0x0010.0] 0x0000:0x00 0x00\n  [0x0010.0] 0x0000:0x00 0x00\n  [0x0010.0] 0x0000:0x00 0x00\n  [0x0010.0] 0x0000:0x00 0x00\n  [0x0010.0] 0x0000:0x00 0x00\n  SM3 inputs\n     addr b   index: sub bitl data_type    name\n  [0x0027.0] 0x6041:0x00 0x10 UNSIGNED16   Statusword\n  [0x0029.0] 0x6064:0x00 0x20 INTEGER32    Position Actual Value\n  [0x002D.0] 0x0000:0x00 0x00\n  [0x002D.0] 0x0000:0x00 0x00\n  [0x002D.0] 0x0000:0x00 0x00\n  [0x002D.0] 0x0000:0x00 0x00\n  [0x002D.0] 0x0000:0x00 0x00\n  [0x002D.0] 0x0000:0x00 0x00\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(6540);const i={},s=t.createContext(i);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);